{"version":3,"sources":["webpack:///webpack/bootstrap 9064402568576fbe2262","webpack:///./scripts/app.js","webpack:///./scripts/request.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9064402568576fbe2262\n **/","/**\r\n * Created by Andrey on 27.04.2016.\r\n */\r\nlet request = require('./request');\r\n\r\nconst API_KEY = '72755c7ee49139053c45348fd0585eb9';\r\nconst API_SECRET = 'b3c2e211c6b3d92b';\r\n\r\nclass FlickrApp {\r\n    constructor(apiKey, apiSecret){\r\n        this.API_KEY = apiKey;\r\n        this.API_SECRTET = apiSecret;\r\n    }\r\n\r\n    /**\r\n     * basic flickr url for all methods\r\n     * @return {string}\r\n     */\r\n    get BASIC_URL() {\r\n        return 'https://api.flickr.com/services/rest/?format=json&api_key=' + this.API_KEY;\r\n    }\r\n\r\n    /**\r\n     * build request url based on params\r\n     * @param params - object with flickr methods and parameters\r\n     * @param url\r\n     * @returns {string}\r\n     */\r\n    buildUrl(params = {}, url = this.BASIC_URL){\r\n        for (let key in params){\r\n            url += `&${key}=${params[key]}`;\r\n        }\r\n        return url;\r\n    }\r\n\r\n    /**\r\n     * specific function for finding photos by phrase or more complex options\r\n     * @param text\r\n     * @param options\r\n     */\r\n    findPhotos(text, options = {}){\r\n        options = typeof text == 'object' ? text : options;\r\n        let standardOptions = {method: 'flickr.photos.search'};\r\n        let defaults = {\r\n            text: text,\r\n            per_page: 20,\r\n            page: 1\r\n        };\r\n        let parameters = Object.assign({}, defaults, options, standardOptions);\r\n        let url = this.buildUrl(parameters);\r\n        request.scriptRequest(url, (data) => {\r\n            this.renderPhotos(data.photos.photo);\r\n        }, (data) => {\r\n            throw Error(`Wrong url - ${data}`);\r\n        });\r\n    }\r\n\r\n    renderPhotos(photos = []){\r\n        let ul = document.createElement(\"ul\");\r\n        for (let {farm, server, id, secret} of photos){\r\n            let li = document.createElement(\"li\");\r\n            let img = document.createElement(\"img\");\r\n            img.src = `https://farm${farm}.static.flickr.com/${server}/${id}_${secret}.jpg`;\r\n            li.appendChild(img);\r\n            ul.appendChild(li);\r\n        }\r\n        document.body.appendChild(ul);\r\n    }\r\n\r\n}\r\n\r\nlet flickr = new FlickrApp(API_KEY, API_SECRET);\r\nlet elems = {\r\n    input: document.getElementById(\"photos\"),\r\n    button: document.getElementById(\"get_photos\")\r\n};\r\nelems.button.onclick = () => {\r\n    let text = elems.input.value;\r\n    if (text != ''){\r\n       flickr.findPhotos({text: text, per_page: 5});\r\n    }\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/app.js\n **/","/**\r\n * Created by Andrey on 11.05.2016.\r\n */\r\nclass Request {\r\n    constructor(){\r\n        window.CallbackRegistry = {}; // реестр\r\n    }\r\n\r\n    // при успехе вызовет onSuccess, при ошибке onError\r\n    scriptRequest(url, onSuccess, onError) {\r\n\r\n        var scriptOk = false; // флаг, что вызов прошел успешно\r\n\r\n        // сгенерировать имя JSONP-функции для запроса\r\n        var callbackName = 'cb' + String(Math.random()).slice(-6);\r\n\r\n        // укажем это имя в URL запроса\r\n        url += ~url.indexOf('?') ? '&' : '?';\r\n        url += 'jsoncallback=CallbackRegistry.' + callbackName;\r\n\r\n        // ..и создадим саму функцию в реестре\r\n        CallbackRegistry[callbackName] = function(data) {\r\n            scriptOk = true; // обработчик вызвался, указать что всё ок\r\n            delete CallbackRegistry[callbackName]; // можно очистить реестр\r\n            onSuccess(data); // и вызвать onSuccess\r\n        };\r\n\r\n        // эта функция сработает при любом результате запроса\r\n        // важно: при успешном результате - всегда после JSONP-обработчика\r\n        function checkCallback() {\r\n            if (scriptOk) return; // сработал обработчик?\r\n            delete CallbackRegistry[callbackName];\r\n            onError(url); // нет - вызвать onError\r\n        }\r\n\r\n        var script = document.createElement('script');\r\n\r\n        // в старых IE поддерживается только событие, а не onload/onerror\r\n        // в теории 'readyState=loaded' означает \"скрипт загрузился\",\r\n        // а 'readyState=complete' -- \"скрипт выполнился\", но иногда\r\n        // почему-то случается только одно из них, поэтому проверяем оба\r\n        script.onreadystatechange = function() {\r\n            if (this.readyState == 'complete' || this.readyState == 'loaded') {\r\n                this.onreadystatechange = null;\r\n                setTimeout(checkCallback, 0); // Вызвать checkCallback - после скрипта\r\n            }\r\n        };\r\n\r\n        // события script.onload/onerror срабатывают всегда после выполнения скрипта\r\n        script.onload = script.onerror = checkCallback;\r\n        script.src = url;\r\n\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = new Request();\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/request.js\n **/"],"sourceRoot":""}