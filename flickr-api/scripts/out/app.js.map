{"version":3,"sources":["../app.js"],"names":[],"mappings":";;;;;;;;;AAGA,IAAM,UAAU,kCAAV;AACN,IAAM,aAAa,kBAAb;;IAEA;AACF,aADE,SACF,CAAY,MAAZ,EAAoB,SAApB,EAA8B;8BAD5B,WAC4B;;AAC1B,aAAK,OAAL,GAAe,MAAf,CAD0B;AAE1B,aAAK,WAAL,GAAmB,SAAnB,CAF0B;KAA9B;;;;;;;;iBADE;;;;;;;;;;mCAoByC;gBAAlC,+DAAS,kBAAyB;gBAArB,4DAAM,KAAK,SAAL,gBAAe;;AACvC,iBAAK,IAAI,GAAJ,IAAW,MAAhB,EAAuB;AACnB,6BAAW,YAAO,OAAO,GAAP,CAAlB,CADmB;aAAvB;AAGA,mBAAO,GAAP,CAJuC;;;;;;;;;;mCAWhC,SAAQ;;;AACf,gBAAI,MAAM,KAAK,QAAL,CAAc;AACpB,wBAAQ,sBAAR;AACA,sBAAM,OAAN;aAFM,CAAN,CADW;AAKf,0BAAc,GAAd,EAAmB,UAAC,IAAD,EAAU;AACzB,sBAAK,YAAL,CAAkB,KAAK,MAAL,CAAY,KAAZ,CAAlB,CADyB;aAAV,EAEhB,UAAC,IAAD,EAAU;AACT,sBAAM,uBAAqB,IAArB,CAAN,CADS;aAAV,CAFH,CALe;;;;uCAYM;gBAAZ,+DAAS,kBAAG;;AACrB,gBAAI,KAAK,SAAS,aAAT,CAAuB,IAAvB,CAAL,CADiB;;;;;;AAErB,qCAAuC,gCAAvC,oGAA8C;;wBAApC,wBAAoC;wBAA9B,4BAA8B;wBAAtB,oBAAsB;wBAAlB,4BAAkB;;AAC1C,wBAAI,KAAK,SAAS,aAAT,CAAuB,IAAvB,CAAL,CADsC;AAE1C,wBAAI,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAN,CAFsC;AAG1C,wBAAI,GAAJ,oBAAyB,+BAA0B,eAAU,WAAM,eAAnE,CAH0C;AAI1C,uBAAG,WAAH,CAAe,GAAf,EAJ0C;AAK1C,uBAAG,WAAH,CAAe,EAAf,EAL0C;iBAA9C;;;;;;;;;;;;;;aAFqB;;AASrB,qBAAS,IAAT,CAAc,WAAd,CAA0B,EAA1B,EATqB;;;;4BAjCT;AACZ,mBAAO,+DAA+D,KAAK,OAAL,CAD1D;;;;WAVd;;;AAyDN,IAAI,SAAS,IAAI,SAAJ,CAAc,OAAd,EAAuB,UAAvB,CAAT;AACJ,IAAI,QAAQ;AACR,WAAO,SAAS,cAAT,CAAwB,QAAxB,CAAP;AACA,YAAQ,SAAS,cAAT,CAAwB,YAAxB,CAAR;CAFA;AAIJ,MAAM,MAAN,CAAa,OAAb,GAAuB,YAAM;AACzB,QAAI,OAAO,MAAM,KAAN,CAAY,KAAZ,CADc;AAEzB,QAAI,QAAQ,EAAR,EAAW;AACZ,eAAO,UAAP,CAAkB,IAAlB,EADY;KAAf;CAFmB","file":"app.js","sourcesContent":["/**\r\n * Created by Andrey on 27.04.2016.\r\n */\r\nconst API_KEY = '72755c7ee49139053c45348fd0585eb9';\r\nconst API_SECRET = 'b3c2e211c6b3d92b';\r\n\r\nclass FlickrApp {\r\n    constructor(apiKey, apiSecret){\r\n        this.API_KEY = apiKey;\r\n        this.API_SECRTET = apiSecret;\r\n    }\r\n\r\n    /**\r\n     * basic flickr url for all methods\r\n     * @return {string}\r\n     */\r\n    get BASIC_URL() {\r\n        return 'https://api.flickr.com/services/rest/?format=json&api_key=' + this.API_KEY;\r\n    }\r\n\r\n    /**\r\n     * build request url based on params\r\n     * @param params - object with flickr methods and parameters\r\n     * @param url\r\n     * @returns {string}\r\n     */\r\n    buildUrl(params = {}, url = this.BASIC_URL){\r\n        for (let key in params){\r\n            url += `&${key}=${params[key]}`;\r\n        }\r\n        return url;\r\n    }\r\n\r\n    /**\r\n     * specific function for finding photos by key word\r\n     * @param keyWord\r\n     */\r\n    findPhotos(keyWord){\r\n        let url = this.buildUrl({\r\n            method: 'flickr.photos.search',\r\n            text: keyWord\r\n        });\r\n        scriptRequest(url, (data) => {\r\n            this.renderPhotos(data.photos.photo);\r\n        }, (data) => {\r\n            throw Error(`Wrong url - ${data}`);\r\n        });\r\n    }\r\n\r\n    renderPhotos(photos = []){\r\n        let ul = document.createElement(\"ul\");\r\n        for (let {farm, server, id, secret} of photos){\r\n            let li = document.createElement(\"li\");\r\n            let img = document.createElement(\"img\");\r\n            img.src = `https://farm${farm}.static.flickr.com/${server}/${id}_${secret}.jpg`;\r\n            li.appendChild(img);\r\n            ul.appendChild(li);\r\n        }\r\n        document.body.appendChild(ul);\r\n    }\r\n\r\n}\r\n\r\nlet flickr = new FlickrApp(API_KEY, API_SECRET);\r\nlet elems = {\r\n    input: document.getElementById(\"photos\"),\r\n    button: document.getElementById(\"get_photos\")\r\n};\r\nelems.button.onclick = () => {\r\n    let text = elems.input.value;\r\n    if (text != ''){\r\n       flickr.findPhotos(text);\r\n    }\r\n};\r\n\r\n"]}